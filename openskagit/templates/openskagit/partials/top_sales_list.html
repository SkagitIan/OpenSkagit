{% if results %}
  {% for item in results %}
    <article
      role="button"
      tabindex="0"
      class="group flex flex-col justify-between rounded-xl border border-slate-200 bg-white/80 p-5 shadow-sm transition hover:border-slate-300 hover:bg-white hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-300"
      hx-get="{{ item.modal_url }}"
      hx-target="#parcel-modal"
      hx-swap="outerHTML"
      hx-trigger="click"
      hx-on="keydown.enter: this.click(); keydown.space: this.click();"
    >
      <div class="flex items-start justify-between gap-4">
        <div class="space-y-1">
          <p class="text-sm font-semibold text-slate-900">{{ item.address }}</p>
          <p class="text-xs text-slate-500">{{ item.attributes }}</p>
        </div>
        <div class="flex flex-col items-end gap-1">
          <div class="flex items-baseline gap-2">
            <span class="text-lg font-semibold text-slate-900">{{ item.sale_price_display }}</span>
            <span class="text-xs font-semibold {{ item.delta_class }}">{{ item.delta_display }}</span>
          </div>
          <p class="text-[11px] uppercase tracking-wide text-slate-400 font-medium">vs assessed</p>
        </div>
      </div>

      <div class="mt-6 flex items-center justify-between">
        <p class="text-xs uppercase tracking-wide text-slate-400">{{ item.sale_date_display }}</p>
        <div class="flex items-center gap-2">
          <a
            href="{{ item.links.redfin }}"
            target="_blank"
            rel="noopener"
            hx-on="click: event.stopPropagation();"
            class="h-7 w-7 rounded-full bg-red-500 text-[11px] font-semibold text-white flex items-center justify-center shadow-sm transition hover:bg-red-600"
          >
            R
          </a>
          <a
            href="{{ item.links.skagit }}"
            target="_blank"
            rel="noopener"
            hx-on="click: event.stopPropagation();"
            class="h-7 w-7 rounded-full bg-blue-500 text-[11px] font-semibold text-white flex items-center justify-center shadow-sm transition hover:bg-blue-600"
          >
            S
          </a>
          <button
            type="button"
            hx-get="{{ item.modal_url }}"
            hx-target="#parcel-modal"
            hx-swap="outerHTML"
            hx-on="click: event.stopPropagation();"
            class="h-7 w-7 rounded-full bg-slate-600 text-white text-lg leading-none flex items-center justify-center shadow-sm transition hover:bg-slate-700"
            aria-label="Open full parcel details"
          >
            â‹¯
          </button>
        </div>
      </div>
    </article>
  {% endfor %}
{% else %}
  <div class="col-span-full rounded-xl border border-dashed border-slate-300 bg-white/60 p-8 text-center text-sm text-slate-500">
    No recent sales available right now. Check back soon for the latest transactions.
  </div>
{% endif %}
